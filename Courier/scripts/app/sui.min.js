"use strict";var SUI,sui;(function(n){function i(n){return n===undefined?!0:n===null?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function r(n,t){return i(n)?t:n}function t(n,t){return t===void 0&&(t=""),String(r(n,r(t,""))).trim().toLowerCase()}function u(n,i){var u="YYYY-MM-DD",r;switch(t(i)){case"date":switch(t(n)){case"today":r=moment().format(u);break;case"tomorrow":r=moment().add(1,"day").format(u);break;case"yesterday":r=moment().subtract(1,"day").format(u);break;default:r=moment(n).format(u);String(r).toLowerCase().indexOf("invalid")>=0&&(r=null)}break;case"number":r=angular.isNumber(n)?Number(n):null;break;case"boolean":r=Boolean(n);break;case"xml":r=angular.toJson(n);break;default:r=String(n).trim()}return r}var f,e,o;n.IsBlank=i;n.IfBlank=r;n.Option=t;n.Format=u,function(n){var t=function(){function n(n){var t=this;this.$scope=n;this.addProcedure=function(n,i){t.procedures[n]=i}}return n.$inject=["$scope"],n}();n.Controller=t}(f=n.Main||(n.Main={})),function(n){var u=function(){function n(n,t,i){var r=this;this.$scope=n;this.$parse=t;this.$log=i;this.parameters=[];this.addParameter=function(n){r.parameters.push(n)};this.removeParameter=function(n){var t=r.parameters.indexOf(n);t>=0&&r.parameters.splice(t,1)};this.execute=function(){var n={name:r.name,parameters:[],type:r.type};angular.forEach(r.parameters,function(t){n.parameters.push(t())});r.$log.debug(angular.toJson(n))};this.initialize=function(){var n=function(){r.run!=="manual"&&r.execute()};r.$scope.$watch(function(){return r.parameters.length},function(t,i){t!==i&&r.run!=="manual"&&n()});r.$scope.$watch(function(){return r.run},function(t,i){t!==i&&r.run!=="manual"&&n()});n()}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return i(this.$scope.model)?undefined:this.$parse(this.$scope.model)(this.$scope.$parent)},set:function(n){this.$parse(this.$scope.model).assign(this.$scope.$parent,n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){if(angular.isDefined(this.model)){if(i(this.$scope.type))return i(this.$scope.root)?"array":"object";var n=t(this.$scope.type);return["singleton","object"].indexOf(n)>=0?n:"array"}return"execute"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this.type==="object"?r(this.$scope.root,undefined):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"run",{get:function(){var n=t(this.$scope.run);return["auto","once"].indexOf(n)>=0?n:"manual"},enumerable:!0,configurable:!0}),n.$inject=["$scope","$parse","$log"],n}();n.Controller=u}(e=n.Procedure||(n.Procedure={})),function(n){var f=function(){function n(n,t,i){var r=this;this.$scope=n;this.$routeParams=t;this.$parse=i;this.factory=function(){return{name:r.name,value:r.value,xml:r.xml,required:r.required}}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){if(i(this.$scope.type))return i(this.$scope.value)?"route":"value";var n=t(this.$scope.type);return["route","scope"].indexOf(n)>=0?n:"value"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var n=undefined;switch(this.type){case"route":n=this.$routeParams[this.$scope.value||this.$scope.name];break;case"scope":n=this.$parse(this.$scope.value)(this.$scope.$parent);break;default:n=this.$scope.value}return r(u(n,this.$scope.format),null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"xml",{get:function(){return t(this.$scope.format)==="xml"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return t(this.$scope.required)==="true"},enumerable:!0,configurable:!0}),n.$inject=["$scope","$routeParams","$parse"],n}();n.Controller=f}(o=n.Parameter||(n.Parameter={}))})(SUI||(SUI={}));sui=angular.module("SUI",[]);sui.directive("suiProc",function(){return{restrict:"E",scope:{name:"@",model:"@",type:"@",root:"@",run:"@"},controller:SUI.Procedure.Controller,require:["suiProc","^sui"],link:function(n,t,i,r){r[0].initialize()}}});sui.directive("suiProcParam",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:SUI.Parameter.Controller,require:["suiProcParam","^suiProc"],link:function(n,t,i,r){r[1].addParameter(r[0].factory);n.$on("$destroy",function(){r[1].removeParameter(r[0].factory)});n.$watch(function(){return r[0].value},function(n,t){n!==t&&r[1].run==="auto"&&r[1].execute()})}}});
//# sourceMappingURL=sui.min.js.map
