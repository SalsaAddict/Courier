var Courier,courier;(function(n){"use strict";function t(n){return n===undefined?!0:n===null?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function r(n,i){return t(n)?i:n}function i(n,t,i){var u,f;return t===void 0&&(t=""),i===void 0&&(i=[]),u=angular.lowercase(String(n)).trim(),i.length>0&&(f=!1,angular.forEach(i,function(n){angular.lowercase(n).trim()===u&&(f=!0)}),f||(u=undefined)),r(u,angular.lowercase(t).trim())}function u(n,r){if(t(n))return undefined;var f="YYYY-MM-DD",u;switch(i(r)){case"date":switch(i(n)){case"today":u=moment().format(f);break;case"tomorrow":u=moment().add(1,"day").format(f);break;case"yesterday":u=moment().subtract(1,"day").format(f);break;default:u=moment(n).format(f);angular.lowercase(u).indexOf("invalid")>=0&&(u=null)}break;case"number":u=angular.isNumber(n)?Number(n):null;break;case"boolean":u=Boolean(n);break;case"xml":u=angular.toJson(n);break;default:u=String(n).trim()}return u}var f,e,o;n.IsBlank=t;n.IfBlank=r;n.Option=i;n.Cast=u,function(n){var t=function(){function n(n,t){var i=this;this.$scope=n;this.$log=t;this.procedures={};this.addProcedure=function(n,t){i.procedures[n]=t};this.removeProcedure=function(n){angular.isDefined(i.procedures[n])&&delete i.procedures[n]};this.execute=function(n){i.procedures[n]()}}return n.$inject=["$scope","$log"],n}();n.Controller=t}(f=n.Main||(n.Main={})),function(n){var u=function(){function n(n,i,u,f){var e=this;this.$scope=n;this.$parse=i;this.$log=u;this.$window=f;this.parameters=[];this.addParameter=function(n){e.parameters.push(n)};this.removeParameter=function(n){var t=e.parameters.indexOf(n);t>=0&&e.parameters.splice(t,1)};this.empty=function(){t(e.$scope.model)||(e.model=e.type==="array"?[]:{})};this.execute=function(){e.empty();var n={name:e.name,parameters:[],type:e.type,token:r(e.$window.localStorage.getItem("token"),null)};angular.forEach(e.parameters,function(t){n.parameters.push(t())});e.$log.debug("Execute:"+angular.toJson(n))};this.initialize=function(){e.$scope.$watch(function(){return e.parameters.length},function(n,t){n!==t&&e.run==="auto"&&e.execute()});e.$scope.$watch(function(){return e.run},function(n,t){n!==t&&e.run!=="manual"&&e.execute()});e.run!=="manual"?e.execute():e.empty()}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alias",{get:function(){return r(this.$scope.alias,this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return t(this.$scope.model)?undefined:this.$parse(this.$scope.model)(this.$scope.$parent)},set:function(n){t(this.$scope.model)||this.$parse(this.$scope.model).assign(this.$scope.$parent,n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return t(this.$scope.model)?"execute":t(this.$scope.type)?t(this.$scope.root)?"array":"object":i(this.$scope.type,"array",["singleton","object"])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this.type==="object"?r(this.$scope.root,undefined):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"run",{get:function(){return i(this.$scope.run,"manual",["auto","once"])},enumerable:!0,configurable:!0}),n.$inject=["$scope","$parse","$log","$window"],n}();n.Controller=u}(e=n.Procedure||(n.Procedure={})),function(n){var f=function(){function n(n,t,i){var r=this;this.$scope=n;this.$routeParams=t;this.$parse=i;this.factory=function(){return{name:r.name,value:r.value,xml:r.xml,required:r.required}}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return t(this.$scope.type)?t(this.$scope.value)?"route":"value":i(this.$scope.type,"value",["route","scope"])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var n=undefined;switch(this.type){case"route":n=this.$routeParams[r(this.$scope.value,this.$scope.name)];break;case"scope":n=this.$parse(this.$scope.value)(this.$scope.$parent);break;default:n=this.$scope.value}return r(u(n,this.$scope.format),null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"xml",{get:function(){return i(this.$scope.format)==="xml"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return i(this.$scope.required)==="true"},enumerable:!0,configurable:!0}),n.$inject=["$scope","$routeParams","$parse"],n}();n.Controller=f}(o=n.Parameter||(n.Parameter={}))})(Courier||(Courier={}));courier=angular.module("Courier",[]);courier.directive("courier",function(){return{restrict:"E",scope:{},controller:Courier.Main.Controller,require:["courier"],link:function(){}}});courier.directive("couProcedure",function(){return{restrict:"E",scope:{name:"@",model:"@",type:"@",root:"@",run:"@"},controller:Courier.Procedure.Controller,require:["couProcedure","^courier"],link:function(n,t,i,r){r[0].initialize();r[1].addProcedure(r[0].alias,r[0].execute);n.$on("$destroy",function(){r[0].model=undefined;r[1].removeProcedure(r[0].alias)})}}});courier.directive("couParameter",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:Courier.Parameter.Controller,require:["couParameter","^couProcedure"],link:function(n,t,i,r){r[1].addParameter(r[0].factory);n.$on("$destroy",function(){r[1].removeParameter(r[0].factory)});n.$watch(function(){return r[0].value},function(n,t){n!==t&&r[1].run==="auto"&&r[1].execute()})}}});
//# sourceMappingURL=sui.min.js.map
