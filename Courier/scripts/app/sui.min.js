var SUI,sui;(function(n){"use strict";function t(n){return angular.isUndefined(n)?!0:n===null?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function r(n,i){return i===void 0&&(i=null),t(n)?i:n}function i(n,t){return t===void 0&&(t=""),angular.lowercase(r(n,t)).trim()}var u,f,e;n.IsBlank=t;n.IfBlank=r;n.Option=i,function(n){var t=function(){function n(n,t){var i=this;this.$scope=n;this.$log=t;this._procedures={};this.addProcedure=function(n,t){i._procedures[n]=t};this.removeProcedure=function(n){angular.isDefined(i._procedures[n])&&delete i._procedures[n]};this.execute=function(n){i._procedures[n]()}}return n.$inject=["$scope","$log"],n}();n.Controller=t}(u=n.Main||(n.Main={})),function(n){var u=function(){function n(n,i,r){var u=this;this.$scope=n;this.$parse=i;this.$log=r;this._parameters=[];this.emptyModel=function(){u.model.assign(u.$scope.$parent,u.type==="array"?[]:{})};this.execute=function(){var r=!0,n=[],i;angular.forEach(u._parameters,function(i){var u=i();n.push({name:u.name,value:u.value,xml:u.xml});u.required&&t(u.value)&&(r=!1)});i={name:u.name,parameters:n,type:u.type};u.$log.debug(angular.toJson(i,!1))};this.addParameter=function(n){u._parameters.push(n)};this.removeParameter=function(n){var t=u._parameters.indexOf(n);t>=0&&u._parameters.splice(t,1)}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alias",{get:function(){return r(this.$scope.alias,this.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return t(this.$scope.model)?undefined:this.$parse(this.$scope.model)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){if(t(this.$scope.model))return undefined;if(t(this.$scope.type))return t(this.$scope.root)?"object":"array";var n=i(this.$scope.type);return["singleton","object"].indexOf(n)>=0?n:"array"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this.type==="object"?r(this.$scope.root,undefined):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"run",{get:function(){var n=i(this.$scope.run);return["auto","once"].indexOf(n)>=0?n:"manual"},enumerable:!0,configurable:!0}),n.$inject=["$scope","$parse","$log"],n}();n.Controller=u}(f=n.Procedure||(n.Procedure={})),function(n){var r=function(){function n(n,r,u,f){var e=this;this.$scope=n;this.$routeParams=r;this.$parse=u;this.$log=f;this.factory=function(){var u=i(e.$scope.type,t(e.$scope.value)?"route":"value"),f=i(e.$scope.format,""),n,r=!1;switch(u){case"route":n=e.$routeParams[e.$scope.value||e.$scope.name];break;case"scope":n=e.$parse(e.$scope.value)(e.$scope.$parent);break;default:n=e.$scope.value}if(t(n))n=null;else switch(f){case"date":switch(i(n,"")){case"today":n=moment().format("YYYY-MM-DD");break;case"tomorrow":n=moment().add(1,"days").format("YYYY-MM-DD");break;case"yesterday":n=moment().subtract(1,"days").format("YYYY-MM-DD");break;default:n=moment(n).format("YYYY-MM-DD");angular.lowercase(n).indexOf("invalid")>=0&&(n=null)}break;case"number":n=Number(n);break;case"xml":n=angular.toJson(n,!1);r=!0;break;default:angular.isObject(n)&&(n=angular.toJson(n,!1),r=!0)}return{name:e.$scope.name,value:n,xml:r,required:i(e.$scope.required,"false")==="true"}}}return n.$inject=["$scope","$routeParams","$parse","$log"],n}();n.Controller=r}(e=n.Parameter||(n.Parameter={}))})(SUI||(SUI={}));sui=angular.module("SUI",["ngRoute"]);sui.directive("sui",function(){return{restrict:"E",template:"<ng-transclude><\/ng-transclude>",transclude:!0,scope:{},controller:SUI.Main.Controller}});sui.directive("suiProc",function(){return{restrict:"E",template:"<ng-transclude><\/ng-transclude>",transclude:!0,scope:{name:"@",alias:"@",model:"@",type:"@",root:"@",run:"@"},controller:SUI.Procedure.Controller,require:["^^sui","suiProc"],link:function(n,t,i,r){r[0].addProcedure(r[1].alias,r[1].execute);n.$on("$destroy",function(){r[0].removeProcedure(r[1].alias)});r[1].run!=="manual"&&r[1].execute()}}});sui.directive("suiProcParam",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:SUI.Parameter.Controller,require:["suiProcParam","^^suiProc"],link:function(n,t,i,r){r[1].addParameter(r[0].factory);n.$on("$destroy",function(n,t){n!==t&&r[1].removeParameter(r[0].factory)});n.$watch(function(){return r[0].factory().value},function(n,t){n!==t&&r[1].run==="auto"&&r[1].execute()})}}});
//# sourceMappingURL=sui.min.js.map
