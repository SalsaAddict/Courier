var SUI,sui;(function(n){"use strict";function t(n){return n===undefined?!0:n===null?!0:n==={}?!0:n===[]?!0:String(n).trim().length===0?!0:!1}function r(n,i){return t(n)?i:n}function i(n,t,i){var u,f;return t===void 0&&(t=""),i===void 0&&(i=[]),u=angular.lowercase(String(n)).trim(),i.length>0&&(f=!1,angular.forEach(i,function(n){angular.lowercase(n).trim()===u&&(f=!0)}),f||(u=undefined)),r(u,angular.lowercase(t).trim())}function u(n,t){var u="YYYY-MM-DD",r;switch(i(t)){case"date":switch(i(n)){case"today":r=moment().format(u);break;case"tomorrow":r=moment().add(1,"day").format(u);break;case"yesterday":r=moment().subtract(1,"day").format(u);break;default:r=moment(n).format(u);angular.lowercase(r).indexOf("invalid")>=0&&(r=null)}break;case"number":r=angular.isNumber(n)?Number(n):null;break;case"boolean":r=Boolean(n);break;case"xml":r=angular.toJson(n);break;default:r=String(n).trim()}return r}var f,e,o;n.IsBlank=t;n.IfBlank=r;n.Option=i;n.Format=u,function(n){var t=function(){function n(n,t){var i=this;this.$scope=n;this.$log=t;this.procedures={};this.addProcedure=function(n,t){i.procedures[n]=t};this.removeProcedure=function(n){angular.isDefined(i.procedures[n])&&delete i.procedures[n]};this.execute=function(n){i.procedures[n]()}}return n.$inject=["$scope","$log"],n}();n.Controller=t}(f=n.Main||(n.Main={})),function(n){var u=function(){function n(n,i,r){var u=this;this.$scope=n;this.$parse=i;this.$log=r;this.parameters=[];this.addParameter=function(n){u.parameters.push(n)};this.removeParameter=function(n){var t=u.parameters.indexOf(n);t>=0&&u.parameters.splice(t,1)};this.empty=function(){t(u.$scope.model)||(u.model=u.type==="array"?[]:{})};this.execute=function(){u.empty();var n={name:u.name,parameters:[],type:u.type};angular.forEach(u.parameters,function(t){n.parameters.push(t())});u.$log.debug("Execute:"+angular.toJson(n))};this.initialize=function(){u.$scope.$watch(function(){return u.parameters.length},function(n,t){n!==t&&u.run==="auto"&&u.execute()});u.$scope.$watch(function(){return u.run},function(n,t){n!==t&&u.run!=="manual"&&u.execute()});u.run!=="manual"?u.execute():u.empty()}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alias",{get:function(){return r(this.$scope.alias,this.$scope.name)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){return t(this.$scope.model)?undefined:this.$parse(this.$scope.model)(this.$scope.$parent)},set:function(n){this.$parse(this.$scope.model).assign(this.$scope.$parent,n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return t(this.$scope.model)?"execute":t(this.$scope.type)?t(this.$scope.root)?"array":"object":i(this.$scope.type,"array",["singleton","object"])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this.type==="object"?r(this.$scope.root,undefined):undefined},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"run",{get:function(){return i(this.$scope.run,"manual",["auto","once"])},enumerable:!0,configurable:!0}),n.$inject=["$scope","$parse","$log"],n}();n.Controller=u}(e=n.Procedure||(n.Procedure={})),function(n){var f=function(){function n(n,t,i){var r=this;this.$scope=n;this.$routeParams=t;this.$parse=i;this.factory=function(){return{name:r.name,value:r.value,xml:r.xml,required:r.required}}}return Object.defineProperty(n.prototype,"name",{get:function(){return this.$scope.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return t(this.$scope.type)?t(this.$scope.value)?"route":"value":i(this.$scope.type,"value",["route","scope"])},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){var n=undefined;switch(this.type){case"route":n=this.$routeParams[r(this.$scope.value,this.$scope.name)];break;case"scope":n=this.$parse(this.$scope.value)(this.$scope.$parent);break;default:n=this.$scope.value}return r(u(n,this.$scope.format),null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"xml",{get:function(){return i(this.$scope.format)==="xml"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"required",{get:function(){return i(this.$scope.required)==="true"},enumerable:!0,configurable:!0}),n.$inject=["$scope","$routeParams","$parse"],n}();n.Controller=f}(o=n.Parameter||(n.Parameter={}))})(SUI||(SUI={}));sui=angular.module("sui",[]);sui.directive("sui",function(){return{restrict:"E",scope:{},controller:SUI.Main.Controller,require:["sui"],link:function(){}}});sui.directive("suiProc",function(){return{restrict:"E",scope:{name:"@",model:"@",type:"@",root:"@",run:"@"},controller:SUI.Procedure.Controller,require:["suiProc","?^sui"],link:function(n,t,i,r){r[0].initialize();r[1]!==null&&(r[1].addProcedure(r[0].alias,r[0].execute),n.$on("$destroy",function(){r[1].removeProcedure(r[0].alias)}))}}});sui.directive("suiProcParam",function(){return{restrict:"E",scope:{name:"@",type:"@",value:"@",format:"@",required:"@"},controller:SUI.Parameter.Controller,require:["suiProcParam","^suiProc"],link:function(n,t,i,r){r[1].addParameter(r[0].factory);n.$on("$destroy",function(){r[1].removeParameter(r[0].factory)});n.$watch(function(){return r[0].value},function(n,t){n!==t&&r[1].run==="auto"&&r[1].execute()})}}});
//# sourceMappingURL=sui.min.js.map
